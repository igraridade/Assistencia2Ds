{% extends "base.html" %}

{% block title %}IGECH TECH ‚Äî Contratar Servi√ßo{% endblock %}

{% block page_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/contratar_servico.css') }}">
{% endblock %}

{% block content %}
<main class="main-contratar">
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">üöÄ Contratar Servi√ßo</h1>
            <p class="hero-desc">Escolha o servi√ßo que voc√™ precisa e conecte-se com nossos melhores t√©cnicos</p>
            {% if user_name %}
            <div class="hero-user-badge">
                <span class="user-icon"></span>
                <span class="user-name">{{ user_name }}</span>
            </div>
            {% endif %}
        </div>
    </section>

    <!-- Services Grid -->
    <section class="services-section">
        <div class="services-grid">
            <!-- Card: Hardware -->
            <div class="service-card" data-categoria="Hardware">
                <div class="service-icon-wrapper hardware">
                    <span class="service-icon">üîß</span>
                </div>
                <h2 class="service-title">Hardware</h2>
                <p class="service-description">Manuten√ß√£o e reparo de equipamentos f√≠sicos</p>
                <ul class="service-features">
                    <li>‚úÖ Montagem e upgrade de PCs</li>
                    <li>‚úÖ Troca de componentes</li>
                    <li>‚úÖ Manuten√ß√£o preventiva</li>
                    <li>‚úÖ Diagn√≥stico de falhas</li>
                </ul>
                <button class="btn-contratar" onclick="abrirModalTecnicos('Hardware')">
                    Contratar T√©cnico
                </button>
            </div>

            <!-- Card: Software -->
            <div class="service-card" data-categoria="Software">
                <div class="service-icon-wrapper software">
                    <span class="service-icon">üíª</span>
                </div>
                <h2 class="service-title">Software</h2>
                <p class="service-description">Instala√ß√£o e configura√ß√£o de sistemas</p>
                <ul class="service-features">
                    <li>‚úÖ Instala√ß√£o de sistemas operacionais</li>
                    <li>‚úÖ Configura√ß√£o de programas</li>
                    <li>‚úÖ Remo√ß√£o de v√≠rus e malware</li>
                    <li>‚úÖ Otimiza√ß√£o de desempenho</li>
                </ul>
                <button class="btn-contratar" onclick="abrirModalTecnicos('Software')">
                    Contratar T√©cnico
                </button>
            </div>

            <!-- Card: Redes -->
            <div class="service-card" data-categoria="Redes">
                <div class="service-icon-wrapper redes">
                    <span class="service-icon">üåê</span>
                </div>
                <h2 class="service-title">Redes</h2>
                <p class="service-description">Configura√ß√£o e manuten√ß√£o de redes</p>
                <ul class="service-features">
                    <li>‚úÖ Instala√ß√£o de redes cabeadas</li>
                    <li>‚úÖ Configura√ß√£o de Wi-Fi</li>
                    <li>‚úÖ Seguran√ßa de rede</li>
                    <li>‚úÖ Compartilhamento de recursos</li>
                </ul>
                <button class="btn-contratar" onclick="abrirModalTecnicos('Redes')">
                    Contratar T√©cnico
                </button>
            </div>

            <!-- Card: Suporte -->
            <div class="service-card" data-categoria="Suporte">
                <div class="service-icon-wrapper suporte">
                    <span class="service-icon">üõ†Ô∏è</span>
                </div>
                <h2 class="service-title">Suporte</h2>
                <p class="service-description">Suporte t√©cnico e treinamento</p>
                <ul class="service-features">
                    <li>‚úÖ Suporte remoto</li>
                    <li>‚úÖ Treinamento de usu√°rios</li>
                    <li>‚úÖ Backup e recupera√ß√£o</li>
                    <li>‚úÖ Consultoria t√©cnica</li>
                </ul>
                <button class="btn-contratar" onclick="abrirModalTecnicos('Suporte')">
                    Contratar T√©cnico
                </button>
            </div>
        </div>
    </section>
</main>

<!-- Modal: Sele√ß√£o de T√©cnico (COM SCROLL) -->
<div id="modalTecnicos" class="modal-overlay" style="display: none;" aria-hidden="true">
    <div class="modal-container-tecnicos">
        <!-- Cabe√ßalho fixo -->
        <div class="modal-header-tecnicos">
            <h2 id="modalTitulo">Selecione um T√©cnico</h2>
            <button type="button" class="modal-close-btn" onclick="fecharModal()" aria-label="Fechar">
                &times;
            </button>
        </div>

        <!-- Subt√≠tulo -->
        <div class="modal-subtitle">
            <p>Escolha o t√©cnico mais adequado para o servi√ßo que voc√™ precisa.</p>
        </div>

        <!-- √ÅREA COM SCROLL -->
        <div id="tecnicosLista" class="tecnicos-lista-scroll">
            <!-- T√©cnicos ser√£o carregados aqui via JavaScript -->
        </div>

        <!-- Rodap√© fixo -->
        <div class="modal-footer-tecnicos">
            <button type="button" class="btn-secondary" onclick="fecharModal()">Cancelar</button>
        </div>
    </div>
</div>

<!-- Modal: Contrata√ß√£o -->
<div id="modalContratacao" class="modal-overlay" style="display: none;" aria-hidden="true">
    <div class="modal-container">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üìù Finalizar Contrata√ß√£o</h2>
                <button class="modal-close" onclick="fecharModalContratacao()" aria-label="Fechar">&times;</button>
            </div>
            <div class="modal-body">
                <form id="formContratacao" onsubmit="confirmarContratacao(event)">
                    <!-- T√©cnico Selecionado -->
                    <div class="form-group">
                        <label>T√©cnico Selecionado:</label>
                        <div id="tecnicoSelecionadoInfo" class="tecnico-info-box"></div>
                    </div>

                    <!-- CEP -->
                    <div class="form-group">
                        <label for="cepServico">üìÆ CEP: *</label>
                        <input type="text"
                               id="cepServico"
                               name="cep"
                               placeholder="00000-000"
                               maxlength="9"
                               required>
                        <small id="cepStatus">Digite o CEP para buscar o endere√ßo automaticamente</small>
                    </div>

                    <!-- Endere√ßo (auto-preenchido) -->
                    <div class="form-row">
                        <div class="form-group" style="flex: 3;">
                            <label for="logradouro">Logradouro: *</label>
                            <input type="text"
                                   id="logradouro"
                                   name="logradouro"
                                   placeholder="Rua, Avenida..."
                                   readonly
                                   required>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="numero">N√∫mero: *</label>
                            <input type="text"
                                   id="numero"
                                   name="numero"
                                   placeholder="123"
                                   required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label for="complemento">Complemento:</label>
                            <input type="text"
                                   id="complemento"
                                   name="complemento"
                                   placeholder="Apto, Bloco... (opcional)">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="bairro">Bairro: *</label>
                            <input type="text"
                                   id="bairro"
                                   name="bairro"
                                   placeholder="Bairro"
                                   readonly
                                   required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="flex: 2;">
                            <label for="cidade">Cidade: *</label>
                            <input type="text"
                                   id="cidade"
                                   name="cidade"
                                   placeholder="Cidade"
                                   readonly
                                   required>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="estado">Estado: *</label>
                            <input type="text"
                                   id="estado"
                                   name="estado"
                                   placeholder="UF"
                                   maxlength="2"
                                   readonly
                                   required>
                        </div>
                    </div>

                    <!-- Descri√ß√£o do Problema -->
                    <div class="form-group">
                        <label for="descricaoProblema">üìù Descreva o Problema: *</label>
                        <textarea id="descricaoProblema"
                                  name="descricao"
                                  placeholder="Explique detalhadamente o problema que voc√™ est√° enfrentando..."
                                  required></textarea>
                        <small>M√≠nimo 20 caracteres para garantir uma descri√ß√£o clara</small>
                    </div>

                    <!-- Prioridade -->
                    <div class="form-group">
                        <label for="prioridadeServico">üö® Prioridade:</label>
                        <select id="prioridadeServico" name="prioridade" required>
                            <option value="baixa">Baixa - Pode aguardar alguns dias</option>
                            <option value="media" selected>M√©dia - Resolver em breve</option>
                            <option value="alta">Alta - Urgente</option>
                            <option value="urgente">Urgente - Cr√≠tico</option>
                        </select>
                    </div>

                    <!-- Footer -->
                    <div class="modal-footer">
                        <button type="button" class="btn-secondary" onclick="fecharModalContratacao()">
                            Cancelar
                        </button>
                        <button type="submit" class="btn-primary">
                            ‚úÖ Confirmar Contrata√ß√£o
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block page_js %}
  <script src="{{ url_for('static', filename='js/contratar_servico.js') }}"></script>
{% endblock %}
